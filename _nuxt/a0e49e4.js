(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{366:function(t,e,n){var content=n(445);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(21).default)("5e2d6a78",content,!0,{sourceMap:!1})},443:function(t,e,n){"use strict";var r=n(10),o=n(107)(5),c="find",d=!0;c in[]&&Array(1)[c]((function(){d=!1})),r(r.P+r.F*d,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),n(106)(c)},444:function(t,e,n){"use strict";n(366)},445:function(t,e,n){var r=n(20)((function(i){return i[1]}));r.push([t.i,'.contact-item.active[data-v-a7bed372]{background-color:#f0f0f0}.main-container[data-v-a7bed372]{display:flex;font-family:"Arial",sans-serif;height:80vh}.sidebar[data-v-a7bed372]{background-color:#f0f0f0;border-right:1px solid #ccc;display:flex;flex-direction:column;overflow-y:scroll;width:30%}.sidebar[data-v-a7bed372]::-webkit-scrollbar{display:none}.sidebar[data-v-a7bed372]{-ms-overflow-style:none;scrollbar-width:none}.sidebar-header[data-v-a7bed372]{background-color:#1877f2;color:#fff;padding:20px;text-align:center}.contact-list[data-v-a7bed372]{flex:1;overflow-y:auto}.contact-item[data-v-a7bed372]{align-items:center;cursor:pointer;display:flex;padding:10px;transition:background-color .2s}.contact-item[data-v-a7bed372]:hover{background-color:#ddd}.contact-item .avatar[data-v-a7bed372]{border-radius:50%;height:40px;margin-right:10px;width:40px}.contact-item h4[data-v-a7bed372]{font-size:16px;margin:0}.contact-item p[data-v-a7bed372]{color:#666;font-size:14px;margin:0}.chat-container[data-v-a7bed372]{display:flex;flex:1;flex-direction:column}.chat-header[data-v-a7bed372]{align-items:center;background-color:#1877f2;color:#fff;display:flex;padding:10px}.chat-header .avatar[data-v-a7bed372]{border-radius:50%;height:40px;margin-right:10px;width:40px}.chat-header h3[data-v-a7bed372]{font-size:18px;margin:0}.chat-header p[data-v-a7bed372]{color:#b2dfdb;font-size:14px;margin:0}.chat-window[data-v-a7bed372]{background-color:#f8f9fa;flex:1;max-height:70vh;overflow-y:auto;padding:10px}.chat-message[data-v-a7bed372]{display:flex;margin-bottom:10px}.chat-message.sent[data-v-a7bed372]{justify-content:flex-end}.chat-message.received[data-v-a7bed372]{justify-content:flex-start}.message-bubble[data-v-a7bed372]{border-radius:10px;font-size:14px;margin-bottom:6px;margin-top:6px;max-width:70%;padding:10px;position:relative}.message-bubble p[data-v-a7bed372]{margin:0}.sent .message-bubble[data-v-a7bed372]{background-color:#dcf8c6;border-bottom-right-radius:0}.received .message-bubble[data-v-a7bed372]{background-color:#fff;border-bottom-left-radius:0}.message-time[data-v-a7bed372]{bottom:-18px;color:#999;font-size:10px;position:absolute;right:10px}.chat-input[data-v-a7bed372]{background-color:#fff;border-top:1px solid #ddd;display:flex;padding:10px}.chat-input input[data-v-a7bed372]{border:1px solid #ddd;border-radius:20px;flex:1;margin-right:10px;padding:10px}.chat-input button[data-v-a7bed372]{background:none;border:none;cursor:pointer}.chat-input button img[data-v-a7bed372]{height:24px;width:24px}',""]),r.locals={},t.exports=r},597:function(t,e,n){"use strict";n.r(e);n(443);var r=n(8),o=(n(52),n(41)),c={data:function(){return{contacts:[],messages:[],newMessage:"",activeChat:null}},mounted:function(){this.getData()},methods:{sendMessage:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var time,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t.newMessage.trim()||!t.activeChat){e.next=8;break}return time=(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),data={chat_id:t.activeChat,msg:t.newMessage,date:new Date,time:time,sent_by:t.$store.state.phone},e.next=5,o.a.collection("chat_msgs").create(data);case 5:t.newMessage="",t.scrollToBottom(),t.getData2({id:t.activeChat});case 8:case"end":return e.stop()}}),e)})))()},scrollToBottom:function(){var t=this;this.$nextTick((function(){var e=t.$refs.chatWindow;e.scrollTop=e.scrollHeight}))},getData:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,o.a.collection("chat").getFullList({filter:'person1 = "'.concat(n.$store.state.phone,'" ')});case 3:n.contacts=e.sent,n.getData2(n.contacts[0]);case 5:case"end":return e.stop()}}),e)})))()},getData2:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.activeChat=t.id,n.next=3,o.a.collection("chat_msgs").getFullList({filter:'chat_id = "'.concat(t.id,'" ')});case 3:e.messages=n.sent,e.scrollToBottom();case 5:case"end":return n.stop()}}),n)})))()}}},d=(n(444),n(16)),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"main-container"},[e("div",{staticClass:"sidebar"},[t._m(0),t._v(" "),e("div",{staticClass:"contact-list"},t._l(t.contacts,(function(n,r){return e("div",{key:r,staticClass:"contact-item",class:{active:t.activeChat===n.id},on:{click:function(e){return t.getData2(n)}}},[e("img",{staticClass:"avatar",attrs:{src:n.image,alt:"Contact Avatar"}}),t._v(" "),e("div",{staticClass:"contact-details"},[e("h4",[t._v(t._s(n.name2))])])])})),0)]),t._v(" "),e("div",{staticClass:"chat-container"},[e("div",{staticClass:"chat-header"},[e("div",{staticClass:"chat-header-details"},[t.activeChat?e("h3",[t._v("\n          Chat with "+t._s(t.contacts.find((function(e){return e.id===t.activeChat})).name2)+"\n        ")]):t._e()])]),t._v(" "),e("div",{ref:"chatWindow",staticClass:"chat-window"},t._l(t.messages,(function(n,r){return e("div",{key:r,class:["chat-message",n.sent_by===t.$store.state.phone?"sent":"received"]},[e("div",{staticClass:"message-bubble"},[e("p",{staticClass:"message-text"},[t._v(t._s(n.msg))]),t._v(" "),e("span",{staticClass:"message-time"},[t._v(t._s(n.time))])])])})),0),t._v(" "),e("div",{staticClass:"chat-input"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.newMessage,expression:"newMessage"}],attrs:{type:"text",placeholder:"Type your message..."},domProps:{value:t.newMessage},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMessage.apply(null,arguments)},input:function(e){e.target.composing||(t.newMessage=e.target.value)}}}),t._v(" "),e("button",{on:{click:t.sendMessage}},[t._v("SEND")])])])])}),[function(){var t=this._self._c;return t("div",{staticClass:"sidebar-header"},[t("h2",[this._v("Chats")])])}],!1,null,"a7bed372",null);e.default=component.exports}}]);